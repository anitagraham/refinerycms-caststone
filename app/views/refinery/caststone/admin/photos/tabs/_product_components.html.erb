<!-- shared a set of components for a series selected for a photo  -->
<!-- series=product, photo -->

<%= simple_fields_for :photo do |f| %>

    <% Refinery::Caststone::Components::COMP_TYPES.each do |ct| %>
      <%ct = ct.downcase
        ct_plural = ct.pluralize
      %>
      <% if product.uses(ct) %>
        <fieldset id="<%= ct %>" class="component_type <%= ct_plural  %>">
          <legend ><%= ct_plural.capitalize %></legend >

          <%= f.collection_check_boxes :component_ids, product.send(ct_plural), :id, :uc_name  %>

          <%= link_to "Clear #{ct_plural}", '#', id: ct_plural, class: 'button clearComponentSet' %>
        </fieldset >
      <% end %>
    <% end %>
<% end %>

